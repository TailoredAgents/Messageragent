<section class="section section--hero">
  <div class="hero-card">
    <div class="hero-card__intro">
      <p class="hero-card__eyebrow"><%= summary.greeting %></p>
      <h2 class="hero-card__headline"><%= summary.headline %></h2>
      <p class="hero-card__body"><%= summary.subheadline %></p>
      <div class="hero-card__meta">
        <span title="<%= summary.refreshExact %>"
          >Updated <%= summary.refreshRelative %></span
        >
        <span>Active leads: <strong><%= summary.activeLeadTally %></strong></span>
        <span>Booked jobs: <strong><%= summary.bookedJobTally %></strong></span>
      </div>
    </div>
    <div class="hero-card__stats">
      <div class="hero-card__stat">
        <span class="hero-card__stat-label">Leads in pipeline</span>
        <span class="hero-card__stat-value"
          ><%= summary.totalLeadTally.toLocaleString('en-US') %></span
        >
        <span class="hero-card__stat-footnote"
          ><%= summary.newLeadsToday %> new today</span
        >
      </div>
      <div class="hero-card__stat hero-card__stat--accent">
        <span class="hero-card__stat-label">Conversion rate</span>
        <span class="hero-card__stat-value"><%= summary.conversionRate %></span>
        <span class="hero-card__stat-footnote"
          >Avg quote <%= summary.averageQuoteValue %></span
        >
      </div>
    </div>
  </div>
</section>

<section class="section">
  <div class="agent-toggle-card">
    <div
      class="agent-toggle-card__status <%= agentStatus && agentStatus.paused ? 'is-paused' : 'is-running' %>"
    >
      <div class="agent-toggle-card__label">Automation Status</div>
      <div class="agent-toggle-card__value">
        <%= agentStatus && agentStatus.paused ? 'Agent Paused' : 'Agent Running' %>
      </div>
      <% if (agentStatus) { %>
      <div class="agent-toggle-card__meta">
        Updated <%= agentStatus.updatedRelative %> by
        <%= agentStatus.updatedBy %>
      </div>
      <% } %>
    </div>
    <form class="agent-toggle-card__form" method="post" action="/admin/agent-toggle">
      <input
        type="hidden"
        name="paused"
        value="<%= agentStatus && agentStatus.paused ? 'false' : 'true' %>"
      />
      <input type="hidden" name="actor" value="<%= adminUserLabel || 'Owner' %>" />
      <button class="button button--primary" type="submit">
        <%= agentStatus && agentStatus.paused ? 'Resume Agent' : 'Pause Agent' %>
      </button>
    </form>
  </div>

  <div class="section__header">
    <h3 class="section__title">Executive Metrics</h3>
    <p class="section__subtitle">
      Live overview of your booking health, approvals, and revenue signals.
    </p>
  </div>
  <div class="metrics-grid">
    <% metricsCards.forEach(function (card) { %>
    <article class="metric-card metric-card--<%= card.key %>">
      <div class="metric-card__icon"></div>
      <div class="metric-card__labels">
        <span class="metric-card__label"><%= card.label %></span>
        <% if (card.hint) { %>
        <span class="metric-card__hint"><%= card.hint %></span>
        <% } %>
      </div>
      <div class="metric-card__value"><%= card.value %></div>
      <% if (card.deltaLabel) { %>
      <div
        class="metric-card__delta metric-card__delta--<%= card.deltaTone || 'neutral' %>"
      >
        <span class="metric-card__delta-indicator"></span>
        <span><%= card.deltaLabel %></span>
      </div>
      <% } %>
    </article>
    <% }) %>
  </div>
</section>
