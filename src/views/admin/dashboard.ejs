<section class="section section--hero">
  <div class="hero-card">
    <div class="hero-card__intro">
      <p class="hero-card__eyebrow"><%= summary.greeting %></p>
      <h2 class="hero-card__headline"><%= summary.headline %></h2>
      <p class="hero-card__body"><%= summary.subheadline %></p>
      <div class="hero-card__meta">
        <span title="<%= summary.refreshExact %>"
          >Updated <%= summary.refreshRelative %></span
        >
        <span>Active leads: <strong><%= summary.activeLeadTally %></strong></span>
        <span>Booked jobs: <strong><%= summary.bookedJobTally %></strong></span>
      </div>
    </div>
    <div class="hero-card__stats">
      <div class="hero-card__stat">
        <span class="hero-card__stat-label">Leads in pipeline</span>
        <span class="hero-card__stat-value"
          ><%= summary.totalLeadTally.toLocaleString('en-US') %></span
        >
        <span class="hero-card__stat-footnote"
          ><%= summary.newLeadsToday %> new today</span
        >
      </div>
      <div class="hero-card__stat hero-card__stat--accent">
        <span class="hero-card__stat-label">Conversion rate</span>
        <span class="hero-card__stat-value"><%= summary.conversionRate %></span>
        <span class="hero-card__stat-footnote"
          >Avg quote <%= summary.averageQuoteValue %></span
        >
      </div>
    </div>
  </div>
</section>

<section class="section">
  <div class="section__header">
    <h3 class="section__title">Executive Metrics</h3>
    <p class="section__subtitle">
      Live overview of your booking health, approvals, and revenue signals.
    </p>
  </div>
  <div class="metrics-grid">
    <% metricsCards.forEach(function (card) { %>
    <article class="metric-card metric-card--<%= card.key %>">
      <div class="metric-card__icon"></div>
      <div class="metric-card__labels">
        <span class="metric-card__label"><%= card.label %></span>
        <% if (card.hint) { %>
        <span class="metric-card__hint"><%= card.hint %></span>
        <% } %>
      </div>
      <div class="metric-card__value"><%= card.value %></div>
      <% if (card.deltaLabel) { %>
      <div
        class="metric-card__delta metric-card__delta--<%= card.deltaTone || 'neutral' %>"
      >
        <span class="metric-card__delta-indicator"></span>
        <span><%= card.deltaLabel %></span>
      </div>
      <% } %>
    </article>
    <% }) %>
  </div>
</section>

<section class="section section--automation">
  <div class="automation-grid">
    <article class="automation-panel card">
      <header class="automation-panel__header">
        <span class="automation-panel__eyebrow">Automation Control</span>
        <div class="automation-panel__status">
          <span class="badge badge--signal <%= agentStatus && agentStatus.paused ? 'badge--warning' : 'badge--success' %>">
            <%= agentStatus && agentStatus.paused ? 'Agent Paused' : 'Agent Running' %>
          </span>
          <% if (agentStatus) { %>
          <span class="automation-panel__meta">
            Updated <strong><%= agentStatus.updatedRelative %></strong> by
            <strong><%= agentStatus.updatedBy %></strong>
          </span>
          <% } %>
        </div>
      </header>
      <p class="automation-panel__body">
        Stonegate AI handles Messenger + SMS triage automatically. Tap the control to
        hand conversations back to a human or spin the agent up again.
      </p>
      <form class="automation-panel__actions" method="post" action="/admin/agent-toggle">
        <input
          type="hidden"
          name="paused"
          value="<%= agentStatus && agentStatus.paused ? 'false' : 'true' %>"
        />
        <input type="hidden" name="actor" value="<%= adminUserLabel || 'Owner' %>" />
        <button
          class="button <%= agentStatus && agentStatus.paused ? 'button--success' : 'button--danger' %>"
          type="submit"
        >
          <%= agentStatus && agentStatus.paused ? 'Resume Automation' : 'Pause Automation' %>
        </button>
      </form>
      <ul class="automation-panel__list">
        <li>Messenger + SMS threads continue running while automation is live.</li>
        <li>Pausing keeps leads in the pipeline so you can reply manually.</li>
        <li>Audit events are logged every time this toggle changes.</li>
      </ul>
    </article>

    <article class="automation-panel card">
      <header class="automation-panel__header">
        <span class="automation-panel__eyebrow">Crew Handoff Notes</span>
        <h4 class="automation-panel__headline">Stay aligned after the quote</h4>
      </header>
      <p class="automation-panel__body">
        Drop any special instructions for today’s route—access codes, staging notes,
        or promo specifics. Everyone sees the same context.
      </p>
      <div class="automation-panel__notes">
        <div>
          <strong>Today’s focus</strong>
          <p>Curbside FB promo leads, two same-day slots left.</p>
        </div>
        <div>
          <strong>Crew reminder</strong>
          <p>Send “On the way” text once you leave the prior stop.</p>
        </div>
      </div>
    </article>
  </div>
</section>

<section class="section section--cta">
  <div class="cta-grid">
    <article class="cta-card">
      <div class="cta-card__content">
        <h4 class="cta-card__title">Show it live</h4>
        <p class="cta-card__body">
          Hop on a quick screen-share to walk prospects through the Stonegate AI dashboard.
        </p>
      </div>
      <button class="button button--ghost" type="button">Schedule Demo</button>
    </article>
    <article class="cta-card">
      <div class="cta-card__content">
        <h4 class="cta-card__title">Deploy the agent</h4>
        <p class="cta-card__body">
          Launch the Messenger agent for new leads and test the full experience end to end.
        </p>
      </div>
      <button class="button button--primary" type="button">
        Launch Messenger Agent
      </button>
    </article>
  </div>
</section>
